language: python
python:
 - "3.6.3"

 services:
  - postgresql

env:
  global:
    - APP_SETTINGS=TestingConfig

install: pip install -r requirements.txt

before_script:
  - "psql -c 'create database test_db;' -U postgres"
  - python manage.py db init
  - python manage.py db migrate
  - python manage.py db upgrade

script:
    - coverage run --source=app/ -m pytest
    - coverage report
    - coveralls
